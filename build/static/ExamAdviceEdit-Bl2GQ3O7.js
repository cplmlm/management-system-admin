import{r as i,F as a,s as T,av as E,bK as C,bL as F,j as e,R as M,C as l,i as q,S as R,d as k,I as d}from"./index-Da2ZG1xd.js";import{T as x}from"./index-5IsStPVA.js";const{TextArea:o}=d,G=n=>{i.useImperativeHandle(n.onRef,()=>({confirm:g}));const[c]=a.useForm(),[m,j]=T.useMessage(),[p,u]=i.useState(""),[b,y]=i.useState(""),[V,I]=i.useState(0),[H,w]=E.useModal(),[r,h]=i.useState(1);i.useEffect(()=>{f()},[]);const f=()=>{const s=n.data;y(s.examAdviceTypeId),s.id!==void 0&&s.id!==null&&s.id!==""?(u(s.id),h(s.type),c.setFieldsValue(s)):(c.setFieldsValue({serialNumber:s.serialNumber,type:1}),I(s.serialNumber),u(""))},g=()=>{c.validateFields().then(s=>{p!==""?(s.id=p,v(s)):(s.examAdviceTypeId=b,N(s))}).catch(s=>{})},N=async s=>{n.setLoading(!0);let t=await C(s);(t==null?void 0:t.status)===200&&(m.success(t.message),n.closeModal(2)),n.setLoading(!1)},v=async s=>{const t=await F(s);(t==null?void 0:t.status)===200&&(m.success(t.message),n.closeModal(2))},S=({target:{value:s}})=>{h(s)},A=[{label:"数字",value:1},{label:"文本",value:2}];return e.jsxs("div",{className:"form-content",children:[j,w,e.jsx(a,{form:c,preserve:!1,labelCol:{span:6},children:e.jsxs(M,{children:[e.jsx(l,{span:12,children:e.jsx(a.Item,{label:"序号",name:"serialNumber",rules:[{required:!0,message:"序号不能为空"}],children:e.jsx(x,{className:"input-width",placeholder:"请输入",min:0})})}),e.jsx(l,{span:12,children:e.jsx(a.Item,{label:"数据类型",name:"type",rules:[{required:!0,message:"数据类型不能为空"}],children:e.jsx(q.Group,{options:A,onChange:S,optionType:"button"})})}),e.jsx(l,{span:12,children:e.jsx(a.Item,{label:"性别",name:"gender",children:e.jsx(R,{showSearch:!0,placeholder:"请选择",optionFilterProp:"label",className:"select-width",options:k("1819214015717576704",!0)})})}),e.jsx(l,{span:12,children:e.jsx(a.Item,{label:"年龄",name:"age",children:e.jsx(x,{min:0,className:"input-width",placeholder:"请输入"})})}),e.jsx(l,{span:12,style:{display:r===1?"block":"none"},children:e.jsx(a.Item,{label:"起始值",name:"startValue",rules:[{required:r===1,message:"起始值不能为空"}],children:e.jsx(d,{className:"input-width",placeholder:"请输入"})})}),e.jsx(l,{span:12,style:{display:r===1?"block":"none"},children:e.jsx(a.Item,{label:"结束值",name:"endValue",rules:[{required:r===1,message:"结束值不能为空"}],children:e.jsx(d,{className:"input-width",placeholder:"请输入"})})}),e.jsx(l,{span:12,style:{display:r===2?"block":"none"},children:e.jsx(a.Item,{label:"结果",name:"result",rules:[{required:r===2,message:"结果不能为空"}],children:e.jsx(d,{className:"input-width",placeholder:"请输入"})})}),e.jsx(l,{span:12,children:e.jsx(a.Item,{label:"结论",name:"conclusion",children:e.jsx(d,{className:"input-width",placeholder:"请输入"})})}),e.jsx(l,{span:24,children:e.jsx(a.Item,{label:"建议",name:"advice",rules:[{required:!0,message:"建议不能为空"}],labelCol:{span:3},children:e.jsx(o,{rows:4,style:{whiteSpace:"pre-wrap"},placeholder:"请输入"})})}),e.jsx(l,{span:24,children:e.jsx(a.Item,{label:"健康知识",name:"healthKnowledge",labelCol:{span:3},children:e.jsx(o,{rows:2,style:{whiteSpace:"pre-wrap"},placeholder:"请输入"})})}),e.jsx(l,{span:24,children:e.jsx(a.Item,{label:"备注",name:"remark",labelCol:{span:3},children:e.jsx(o,{rows:2,style:{whiteSpace:"pre-wrap"},placeholder:"请输入"})})})]})})]})};export{G as default};
