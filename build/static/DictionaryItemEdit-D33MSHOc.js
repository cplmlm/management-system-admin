import{r as l,F as n,s as g,av as F,aw as M,ax as C,j as s,R as D,C as r,I as d}from"./index-Da2ZG1xd.js";import{T as E}from"./index-5IsStPVA.js";const{TextArea:R}=d,H=t=>{l.useImperativeHandle(t.onRef,()=>({confirm:y}));const[i]=n.useForm(),[c,x]=g.useMessage(),[o,m]=l.useState(""),[h,p]=l.useState(""),[f,u]=l.useState(0),[j,I]=F.useModal();l.useEffect(()=>{b()},[]);const b=()=>{const e=t.data;p(e.dictionaryTypeId),e.id!==void 0&&e.id!==null&&e.id!==""?(m(e.id),i.setFieldsValue(e)):(i.setFieldsValue({serialNumber:e.serialNumber,code:e.serialNumber}),u(e.serialNumber),m(""))},y=()=>{i.validateFields().then(e=>{o!==""?(e.id=o,T(e)):(e.dictionaryTypeId=h,N(e))}).catch(e=>{})},N=async e=>{t.setLoading(!0);let a=await M(e);(a==null?void 0:a.status)===200&&(c.success(a.message),w()),t.setLoading(!1)},w=()=>{j.confirm({title:"是否继续创建字典？",content:"",okText:"是",cancelText:"否",centered:!0,onOk(){i.resetFields();const e=f+1;i.setFieldsValue({serialNumber:e,code:e}),u(e)},onCancel(){t.closeModal(2)}})},T=async e=>{let a=await C(e);(a==null?void 0:a.status)===200&&(c.success(a.message),t.closeModal(2))};return s.jsxs("div",{className:"form-content",children:[x,I,s.jsx(n,{form:i,preserve:!1,labelCol:{span:6},children:s.jsxs(D,{children:[s.jsx(r,{span:24,children:s.jsx(n.Item,{label:"序号",name:"serialNumber",rules:[{required:!0,message:"序号不能为空"}],children:s.jsx(E,{className:"input-width",placeholder:"请输入",min:0})})}),s.jsx(r,{span:24,children:s.jsx(n.Item,{label:"项目名称",name:"name",rules:[{required:!0,message:"项目名称不能为空"}],children:s.jsx(R,{className:"input-width",rows:4,placeholder:"请输入"})})}),s.jsx(r,{span:24,children:s.jsx(n.Item,{label:"编码",name:"code",children:s.jsx(d,{className:"input-width",placeholder:"请输入"})})}),s.jsx(r,{span:24,children:s.jsx(n.Item,{label:"字典说明",name:"description",children:s.jsx(d,{className:"input-width",placeholder:"请输入"})})})]})})]})};export{H as default};
