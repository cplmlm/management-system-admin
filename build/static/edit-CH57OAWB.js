import{r as d,F as l,s as q,ay as A,az as F,aA as M,j as e,R as S,C as i,I as n,i as t,S as C}from"./index-Da2ZG1xd.js";const R=r=>{d.useImperativeHandle(r.onRef,()=>({confirm:b}));const[c]=l.useForm(),[u,h]=q.useMessage(),[o,m]=d.useState(""),[x,j]=d.useState(""),[p,f]=d.useState([]);d.useEffect(()=>{g(),N()},[]);const g=()=>{const s=r.data;j(s.pid),s.id!==void 0&&s.id!==null&&s.id!==""?(m(s.id),c.setFieldsValue(s)):(m(""),I())},I=()=>{c.setFieldsValue({enabled:!0,isButton:!1,isHide:!1,iskeepAlive:!1})},b=()=>{c.validateFields().then(s=>{s.pid=x,o!==""?(s.id=o,w(s)):v(s)}).catch(s=>{})},v=async s=>{r.setLoading(!0);let a=await A(s);(a==null?void 0:a.status)===200&&(u.success(a.message),r.closeModal(1)),r.setLoading(!1)},w=async s=>{let a=await F(s);(a==null?void 0:a.status)===200&&(u.success(a.message),r.closeModal(2))},N=async()=>{let s=await M({page:-1});(s==null?void 0:s.status)===200&&f(s.data.data)};return e.jsxs("div",{className:"form-content",children:[h,e.jsx(l,{form:c,preserve:!1,labelCol:{span:5},children:e.jsxs(S,{children:[e.jsx(i,{span:12,children:e.jsx(l.Item,{label:"序号",name:"orderSort",rules:[{required:!0,message:"序号不能为空"}],children:e.jsx(n,{className:"input-width",placeholder:"请输入"})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:"菜单名称",name:"name",rules:[{required:!0,message:"菜单名称不能为空"}],children:e.jsx(n,{className:"input-width",placeholder:"请输入"})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:"菜单图标",name:"icon",rules:[{required:!0,message:"菜单图标不能为空"}],children:e.jsx(n,{className:"input-width",placeholder:"请输入"})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:"路由地址",name:"code",rules:[{required:!0,message:"路由地址不能为空"}],children:e.jsx(n,{className:"input-width",placeholder:"请输入"})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:"描述",name:"description",children:e.jsx(n,{className:"input-width",placeholder:"请输入"})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:"是否按钮",name:"isButton",rules:[{required:!0,message:"是否按钮不能为空"}],children:e.jsxs(t.Group,{children:[e.jsx(t,{value:!0,children:"是"}),e.jsx(t,{value:!1,children:"否"})]})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:"按钮事件",name:"func",children:e.jsx(n,{className:"input-width",placeholder:"请输入"})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:"隐藏菜单",name:"isHide",rules:[{required:!0,message:"隐藏菜单不能为空"}],children:e.jsxs(t.Group,{children:[e.jsx(t,{value:!0,children:"是"}),e.jsx(t,{value:!1,children:"否"})]})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:"状态",name:"enabled",rules:[{required:!0,message:"状态不能为空"}],children:e.jsxs(t.Group,{children:[e.jsx(t,{value:!0,children:"激活"}),e.jsx(t,{value:!1,children:"禁用"})]})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:"keepAlive",name:"iskeepAlive",rules:[{required:!0,message:"keepAlive不能为空"}],children:e.jsxs(t.Group,{children:[e.jsx(t,{value:!0,children:"是"}),e.jsx(t,{value:!1,children:"否"})]})})}),e.jsx(i,{span:12,children:e.jsx(l.Item,{label:"API接口",name:"mid",children:e.jsx(C,{showSearch:!0,placeholder:"请选择",optionFilterProp:"label",allowClear:!0,filterOption:(s,a)=>((a==null?void 0:a.name)??"").toLowerCase().includes(s.toLowerCase()),className:"select-width",fieldNames:{label:"name",value:"id"},options:p})})})]})})]})};export{R as default};
