import{r as n,F as r,s as F,av as T,aw as M,ax as w,j as t,R as C,C as m,I as D}from"./index-Da2ZG1xd.js";import{T as E}from"./index-5IsStPVA.js";const v=a=>{n.useImperativeHandle(a.onRef,()=>({confirm:b}));const[i]=r.useForm(),[d,u]=F.useMessage(),[l,o]=n.useState(""),[x,f]=n.useState(""),[p,c]=n.useState(0),[I,h]=T.useModal();n.useEffect(()=>{y()},[]);const y=()=>{const e=a.data;f(e.dictionaryTypeId),e.id!==void 0&&e.id!==null&&e.id!==""?(o(e.id),i.setFieldsValue(e)):(i.setFieldsValue({serialNumber:e.serialNumber}),c(e.serialNumber),o(""))},b=()=>{i.validateFields().then(e=>{l!==""?(e.id=l,g(e)):(e.dictionaryTypeId=x,j(e))}).catch(e=>{})},j=async e=>{a.setLoading(!0);let s=await M(e);(s==null?void 0:s.status)===200&&(d.success(s.message),N()),a.setLoading(!1)},N=()=>{I.confirm({title:"是否继续创建字典？",content:"",okText:"是",cancelText:"否",centered:!0,onOk(){i.resetFields();const e=p+1;i.setFieldsValue({serialNumber:e,code:e}),c(e)},onCancel(){a.closeModal(1)}})},g=async e=>{let s=await w(e);(s==null?void 0:s.status)===200&&(d.success(s.message),a.closeModal(1))};return t.jsxs("div",{className:"form-content",children:[u,h,t.jsx(r,{form:i,preserve:!1,labelCol:{span:6},children:t.jsxs(C,{children:[t.jsx(m,{span:24,children:t.jsx(r.Item,{label:"序号",name:"serialNumber",rules:[{required:!0,message:"序号不能为空"}],children:t.jsx(E,{className:"input-width",placeholder:"请输入",min:0})})}),t.jsx(m,{span:24,children:t.jsx(r.Item,{label:"项目名称",name:"name",rules:[{required:!0,message:"项目名称不能为空"}],children:t.jsx(D,{className:"input-width",placeholder:"请输入"})})})]})})]})};export{v as default};
