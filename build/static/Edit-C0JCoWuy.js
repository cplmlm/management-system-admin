import{r as n,F as s,s as C,m as p,n as y,o as P,p as D,j as e,R as E,C as t,S as i,I as u,d as M,D as R,v as A,q as L}from"./index-Da2ZG1xd.js";import{T as O}from"./index-5IsStPVA.js";const V=r=>{n.useImperativeHandle(r.onRef,()=>({confirm:I}));const[d]=s.useForm(),[o,x]=C.useMessage(),[h,m]=n.useState(""),[j,g]=n.useState([]),[v,b]=n.useState("");n.useEffect(()=>{f(),S()},[]);const f=()=>{const a=r.data;a.id!==void 0&&a.id!==null&&a.id!==""?(m(a.id),a.birthdate=p(a.birthdate),d.setFieldsValue(a),b(a.schoolName)):m("")},I=()=>{d.validateFields().then(a=>{a.schoolName=v,h!==""?(a.id=h,w(a)):N(a)}).catch(a=>{})},N=async a=>{r.setLoading(!0);let l=await y(a);(l==null?void 0:l.status)===200&&(o.success(l.message),r.closeModal(1)),r.setLoading(!1)},w=async a=>{let l=await P(a);(l==null?void 0:l.status)===200&&(o.success(l.message),r.closeModal(2))},S=async a=>{let l=await D(a);(l==null?void 0:l.status)===200&&g(l.data)},F=(a,l)=>{b(l.name)},q=a=>{A(a)||o.error("身份证号码格式不正确");const c=L(a);d.setFieldsValue({age:c.age,gender:c.gender,birthdate:p(c.birthDate)})};return e.jsxs("div",{className:"form-content",children:[x,e.jsx(s,{form:d,preserve:!1,labelCol:{span:6},children:e.jsxs(E,{children:[e.jsx(t,{span:12,children:e.jsx(s.Item,{label:"所属学校",name:"schoolId",rules:[{required:!0,message:"学校不能为空"}],children:e.jsx(i,{showSearch:!0,placeholder:"请选择",optionFilterProp:"label",className:"select-width",fieldNames:{label:"name",value:"id"},options:j,onChange:F})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{label:"姓名",name:"name",rules:[{required:!0,message:"姓名不能为空"}],children:e.jsx(u,{className:"input-width",placeholder:"请输入"})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{label:"身份证号码",name:"idNumber",rules:[{required:!0,message:"身份证号码不能为空"}],children:e.jsx(u,{className:"input-width",placeholder:"请输入",onBlur:a=>q(a.target.value),maxLength:18})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{label:"性别",name:"gender",rules:[{required:!0,message:"性别不能为空"}],children:e.jsx(i,{showSearch:!0,placeholder:"请选择",optionFilterProp:"label",className:"select-width",options:M("1848157317145694208",!0)})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{label:"出生日期",name:"birthdate",rules:[{required:!0,message:"出生日期不能为空"}],children:e.jsx(R,{className:"select-width",placeholder:"请选择"})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{label:"年龄",name:"age",rules:[{required:!0,message:"年龄不能为空"}],children:e.jsx(O,{className:"input-width",min:0,max:150})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{label:"年级",name:"grade",rules:[{required:!0,message:"年级不能为空"}],children:e.jsx(i,{showSearch:!0,placeholder:"请选择",optionFilterProp:"label",className:"select-width",options:[{label:"一年级",value:1},{label:"二年级",value:2},{label:"三年级",value:3},{label:"四年级",value:4},{label:"五年级",value:5},{label:"六年级",value:6},{label:"七年级",value:7},{label:"八年级",value:8},{label:"九年级",value:9},{label:"高一",value:10},{label:"高二",value:11},{label:"高三",value:12}]})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{label:"班级",name:"classGroup",rules:[{required:!0,message:"班级不能为空"}],children:e.jsx(i,{showSearch:!0,placeholder:"请选择",optionFilterProp:"label",className:"select-width",options:[{label:"1班",value:1},{label:"2班",value:2},{label:"3班",value:3},{label:"4班",value:4},{label:"5班",value:5},{label:"6班",value:6},{label:"7班",value:7},{label:"8班",value:8},{label:"9班",value:9}]})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{label:"家庭地址",name:"address",children:e.jsx(u,{className:"input-width",placeholder:"请输入"})})})]})})]})};export{V as default};
